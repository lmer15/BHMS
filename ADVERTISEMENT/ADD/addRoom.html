<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Room</title>
    <script src="../../imported_links.js" defer></script> 
    <link rel="stylesheet" href="styleAdd.css">
</head>
<body>
    
    <div class="wrapper">
        <div class="room-details-form">
            <h2>Add New Room</h2>

            <p class="error" id="signup-error-message" style="color: red; display: none; font-size: small; font-weight: 300;"></p>

            <div class="modal-form">
            <div class="image-upload">
                <label for="roomImage">Room Image:</label>
                <input type="file" id="roomImage" accept="image/*">
                <div id="imagePreviewContainer"></div>
            </div>

            <form id="addRoomForm" action="add-room.php" method="POST" enctype="multipart/form-data">
                <label for="roomNumber">Room Number:</label>
                <input type="text" id="roomNumberInput" name="roomNumber" required>
            
                <label for="roomType">Room Type:</label>
                <select id="roomTypeInput" name="roomType" required>
                    <option value="" disabled selected>Select Room Type</option>
                    <option value="Single">Single</option>
                    <option value="Double">Double</option>
                    <option value="Suite">Suite</option>
                    <option value="Penthouse">Penthouse</option>
                </select>
            
                <label for="roomSize">Room Size:</label>
                <input type="number" id="roomSizeInput" name="roomSize" required placeholder="m²">
            
                <label for="amenities">Amenities:</label>
                <textarea id="amenitiesInput" name="amenities" required placeholder="Air-conditioning, Mini-Kitchen, Wi-Fi..."></textarea>
            
                <label for="utilities">Utilities:</label>
                <textarea id="utilitiesInput" name="utilities" required placeholder="Electricity, Gas, Water, Sewage..."></textarea>
            
                <label for="rentalRates">Rental Rates:</label>
                <input type="number" id="rentalRatesInput" name="rentalRates" required placeholder="₱">
            
                <label for="paymentFrequency">Payment Frequency:</label>
                <select id="paymentFrequency" name="paymentFrequency" required>
                    <option value="" disabled selected>Select Frequency</option>
                    <option value="Weekly">Weekly</option>
                    <option value="Monthly">Monthly</option>
                    <option value="Quarterly">Quarterly</option>
                    <option value="Yearly">Yearly</option>
                </select>
            
                <label for="depositRate">Deposit Rate:</label>
                <input type="number" id="depositRateInput" name="depositRate" required placeholder="₱">
            
                <button type="submit">Add Room</button>
            </form>
            
        </div>
    </div>

    <script>
        // Image Preview JavaScript
        document.getElementById('roomImage').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();

                reader.onload = function(e) {
                    const previewContainer = document.getElementById('imagePreviewContainer');
                    previewContainer.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.alt = "Room Image Preview";
                    img.style.maxWidth = '100%'; 
                    img.style.maxHeight = '100%';
                    img.style.objectFit = 'cover'; 
                    previewContainer.appendChild(img);
                };
                reader.readAsDataURL(file); 
            }
        });

        // Form Validation
        document.getElementById('addRoomForm').addEventListener('submit', function(event) {
            let isValid = true;
            
            const requiredFields = ['roomNumber', 'roomType', 'roomSize', 'amenities', 'utilities', 'rentalRates', 'paymentFrequency', 'depositRate'];
            requiredFields.forEach(function(field) {
                const input = document.getElementById(field + 'Input');
                if (!input.value) {
                    isValid = false;
                    document.getElementById('signup-error-message').innerText = "Please fill in all required fields.";
                    document.getElementById('signup-error-message').style.display = 'block';
                }
            });

            if (!isValid) {
                event.preventDefault(); // Prevent form submission
            }
        });
    </script>

</body>
</html>
